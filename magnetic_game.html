<!DOCTYPE html>
<html>
<head>
    <title>Magnetic Escape Game</title>
    <style>
        body { background: #222; display: flex; justify-content: center; padding-top: 20px; }
        canvas { background: #000; border: 3px solid white; }
        #info { color: white; margin-left: 20px; font-family: Arial; }
    </style>
</head>
<body>
<canvas id="gameCanvas" width="500" height="400"></canvas>
<div id="info">
    <h2>ðŸ§² Magnetic Escape</h2>
    <p><b>Move:</b> Arrow Keys</p>
    <p><b>Goal:</b> Reach the green area!</p>
    <p><b>Avoid:</b> The magnet pulls you!</p>
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

// Player (magnetic material - iron)
let player = { x: 50, y: 180, size: 20, speed: 2 };

// Magnet (source of magnetic field)
let magnet = { x: 300, y: 200, size: 30 };

// Goal
let goal = { x: 450, y: 20, size: 40 };

// Keyboard inputs
let keys = {};
document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function update() {
    // Movement by player
    if (keys["ArrowUp"]) player.y -= player.speed;
    if (keys["ArrowDown"]) player.y += player.speed;
    if (keys["ArrowLeft"]) player.x -= player.speed;
    if (keys["ArrowRight"]) player.x += player.speed;

    // Magnetic attraction (force = 1 / distance)
    let dx = magnet.x - player.x;
    let dy = magnet.y - player.y;
    let distance = Math.sqrt(dx*dx + dy*dy);

    if (distance < 200) {  // Magnetic field range
        let force = 1 / distance;
        player.x += dx * force;
        player.y += dy * force;
    }

    // Check goal
    if (player.x > goal.x - 10 && player.y < goal.y + goal.size) {
        alert("ðŸŽ‰ You escaped the magnet! You WIN!");
        resetGame();
    }

    draw();
    requestAnimationFrame(update);
}

function resetGame() {
    player.x = 50;
    player.y = 180;
}

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Draw magnet (red)
    ctx.fillStyle = "red";
    ctx.fillRect(magnet.x, magnet.y, magnet.size, magnet.size);

    // Draw player (iron block)
    ctx.fillStyle = "silver";
    ctx.fillRect(player.x, player.y, player.size, player.size);

    // Draw goal
    ctx.fillStyle = "green";
    ctx.fillRect(goal.x, goal.y, goal.size, goal.size);
}

update();
</script>
</body>
</html>
